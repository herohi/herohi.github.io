{"componentChunkName":"component---src-templates-blog-post-js","path":"/webpack-bundle/","result":{"data":{"site":{"siteMetadata":{"title":"Herohi Blog"}},"allMarkdownRemark":{"nodes":[{"id":"866798b9-be06-5fc5-88a5-01594cfc3cfb","excerpt":"首先，创建两个模块供主文件导入，分别为 （使用 export 方式导出模块） 和 （使用 module.exports 方式导出模块）。 然后，在主文件中分四种情况来导入模块，来测试一下 Webpack 打包后的产物，他们分别为： 使用 import 导入 es…","fields":{"slug":"/webpack-bundle/"},"frontmatter":{"date":"June 06, 2022","title":"Webpack 打包产物分析","description":"CommonJs, ESModule, import/export, require, module.exports","order":45}},{"id":"6f38702c-1e71-5aa3-a09c-21a4483fdcb3","excerpt":"Decorator 是 ES7 的一个新语法，它可以用来装饰一个类、类中的某个方法、类中的某个属性或类中的某个方法的某个入参。装饰器本质上是一个函数，被装饰的对象（target）会以参数的形式传递给装饰器函数，在函数中可以对这个对象（target…","fields":{"slug":"/decorate/"},"frontmatter":{"date":"May 27, 2022","title":"Decorator 装饰器的用法、实现与应用","description":"decorator, typescript, Reflect, reflect-metadata","order":49}},{"id":"a966d658-d43c-555c-b81f-df239b1a9d19","excerpt":"Django 是一个由 Python 编写的一个开放源代码的 Web 应用框架。 使用 Django，只要很少的代码，Python 的程序开发人员就可以轻松地完成一个正式网站所需要的大部分内容，并进一步开发出全功能的 Web 服务 Django 本身基于 MVC…","fields":{"slug":"/django/"},"frontmatter":{"date":"March 28, 2021","title":"Django 从开发到部署","description":"Django 项目搭建、部署。","order":50}},{"id":"acdadee8-d5bc-5b5c-86d0-fd5ea4d55062","excerpt":"上一篇 Django 从开发到部署 介绍了 Django 的基本操作。这篇将基于上一篇的代码，来扩展一个用户模块。 该模块基于 Django 自带的 auth 模块进行扩展，并实现了微信扫码登录的后端功能。 模块概览 其中： user/libs: 用户模块相关工具库。 user…","fields":{"slug":"/django-user/"},"frontmatter":{"date":"March 28, 2021","title":"Django -- 用户模块","description":"Django 用户模块搭建，基于JWT的登录登出系统、微信登录对接。","order":51}},{"id":"4b6e5d4a-e692-5564-8421-2ab8c362169c","excerpt":"NGINX is a free, open-source, high-performance HTTP server and reverse proxy, as well as an IMAP/POP3 proxy server. NGINX is known for its…","fields":{"slug":"/nginx/"},"frontmatter":{"date":"January 27, 2021","title":"Nginx","description":"Nginx 基本操作（安装、启动、升级...）。","order":null}}]},"markdownRemark":{"id":"866798b9-be06-5fc5-88a5-01594cfc3cfb","excerpt":"首先，创建两个模块供主文件导入，分别为 （使用 export 方式导出模块） 和 （使用 module.exports 方式导出模块）。 然后，在主文件中分四种情况来导入模块，来测试一下 Webpack 打包后的产物，他们分别为： 使用 import 导入 es 模块 使用 import 导入 cjs…","html":"<p>首先，创建两个模块供主文件导入，分别为 <code class=\"language-text\">es.js</code>（使用 export 方式导出模块） 和 <code class=\"language-text\">cjs.js</code>（使用 module.exports 方式导出模块）。</p>\n<p>然后，在主文件中分四种情况来导入模块，来测试一下 Webpack 打包后的产物，他们分别为：</p>\n<ul>\n<li>使用 import 导入 es 模块</li>\n<li>使用 import 导入 cjs 模块</li>\n<li>使用 require 导入 es 模块</li>\n<li>使用 require 导入 cjs 模块</li>\n</ul>\n<div class=\"gatsby-highlight\" data-language=\"js\"><pre class=\"language-js\"><code class=\"language-js\"><span class=\"token punctuation\">(</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n    <span class=\"token comment\">// 每个 module 都会转化成一个 function，然后用一个map去保存这些module，其中，以这个模块文件所在的相对路径作为该模块的key，同时也是该模块的id</span>\n    <span class=\"token keyword\">const</span> __webpack_modules__ <span class=\"token operator\">=</span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">{</span>\n        <span class=\"token string-property property\">'./src/es.js'</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">(</span><span class=\"token parameter\">__unused_webpack_module<span class=\"token punctuation\">,</span> __webpack_exports__<span class=\"token punctuation\">,</span> __webpack_require__</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n            <span class=\"token comment\">/**\n                源码：\n                    export let esVal = 3;\n\n                    setTimeout(() => {\n                        esVal = 333;\n                    })\n\n                    export default esVal;\n             */</span>\n            __webpack_require__<span class=\"token punctuation\">.</span><span class=\"token function\">r</span><span class=\"token punctuation\">(</span>__webpack_exports__<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n            __webpack_require__<span class=\"token punctuation\">.</span><span class=\"token function\">d</span><span class=\"token punctuation\">(</span>__webpack_exports__<span class=\"token punctuation\">,</span> <span class=\"token punctuation\">{</span>\n                <span class=\"token comment\">// 通过闭包的方式，让其他模块可以访问到该模块内部的变量</span>\n               <span class=\"token string-property property\">'esVal'</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> esVal<span class=\"token punctuation\">,</span>\n               <span class=\"token string-property property\">'default'</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> __WEBPACK_DEFAULT_EXPORT__\n            <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n            <span class=\"token keyword\">let</span> esVal <span class=\"token operator\">=</span> <span class=\"token number\">3</span><span class=\"token punctuation\">;</span>\n            <span class=\"token function\">setTimeout</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n                esVal <span class=\"token operator\">=</span> <span class=\"token number\">333</span><span class=\"token punctuation\">;</span>\n            <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span>\n            <span class=\"token keyword\">const</span> __WEBPACK_DEFAULT_EXPORT__ <span class=\"token operator\">=</span> esVal<span class=\"token punctuation\">;</span>\n        <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n        <span class=\"token string-property property\">'./src/cjs.js'</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">(</span><span class=\"token parameter\">module</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n            <span class=\"token comment\">/**\n                源码：\n                let val = 3;\n\n                setTimeout(() => {\n                    val = 333;\n                }, 1000)\n\n                module.exports = {\n                    val\n                }\n             */</span>\n\n            <span class=\"token comment\">// 源码是 commonjs 模块，直接拷贝源码即可</span>\n            <span class=\"token comment\">// 函数参数传入所需要的 module 对象</span>\n            <span class=\"token keyword\">var</span> val <span class=\"token operator\">=</span> <span class=\"token number\">3</span><span class=\"token punctuation\">;</span>\n            <span class=\"token function\">setTimeout</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">function</span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n                val <span class=\"token operator\">=</span> <span class=\"token number\">333</span><span class=\"token punctuation\">;</span>\n            <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span> <span class=\"token number\">1000</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n            module<span class=\"token punctuation\">.</span>exports <span class=\"token operator\">=</span> <span class=\"token punctuation\">{</span>\n                <span class=\"token literal-property property\">val</span><span class=\"token operator\">:</span> val\n            <span class=\"token punctuation\">}</span><span class=\"token punctuation\">;</span>\n        <span class=\"token punctuation\">}</span>\n    <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n    <span class=\"token comment\">// 缓存已经执导入的 module 结果</span>\n    <span class=\"token keyword\">const</span> __webpack_module_cache__ <span class=\"token operator\">=</span> <span class=\"token punctuation\">{</span><span class=\"token punctuation\">}</span><span class=\"token punctuation\">;</span>\n\n\n    <span class=\"token comment\">// 导入函数，接收一个 moduleId 表示需要被导入的模块</span>\n    <span class=\"token keyword\">function</span> <span class=\"token function\">__webpack_require__</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">moduleId</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n        <span class=\"token keyword\">const</span> cachedModule <span class=\"token operator\">=</span> __webpack_module_cache__<span class=\"token punctuation\">[</span>moduleId<span class=\"token punctuation\">]</span><span class=\"token punctuation\">;</span>\n        \n        <span class=\"token comment\">// 该模块是否已经被导入过</span>\n        <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span>cachedModule <span class=\"token operator\">!==</span> <span class=\"token keyword\">undefined</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n            <span class=\"token comment\">// 最终实现都是借鉴了 commonjs 的导出方式，即导出一个 exports 对象</span>\n            <span class=\"token keyword\">return</span> cachedModule<span class=\"token punctuation\">.</span>exports<span class=\"token punctuation\">;</span>\n        <span class=\"token punctuation\">}</span>\n\n        <span class=\"token comment\">// 如果没有被导入过，初始化一个新的 module 结果对象，并将他保存在 cache 中</span>\n        <span class=\"token comment\">// (这里最能体现，实现是借鉴了 commonjs 的导出方式，导出的值就是 module.exports)</span>\n        <span class=\"token keyword\">const</span> module <span class=\"token operator\">=</span> <span class=\"token punctuation\">{</span> <span class=\"token literal-property property\">exports</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">{</span><span class=\"token punctuation\">}</span> <span class=\"token punctuation\">}</span><span class=\"token punctuation\">;</span>\n        __webpack_module_cache__<span class=\"token punctuation\">[</span>moduleId<span class=\"token punctuation\">]</span> <span class=\"token operator\">=</span> module<span class=\"token punctuation\">;</span>\n\n        \n        <span class=\"token comment\">// 执行该模块对应的函数，在函数执行过程中，导出的值会被保存到 module.exports 对象中</span>\n        __webpack_modules__<span class=\"token punctuation\">[</span>moduleId<span class=\"token punctuation\">]</span><span class=\"token punctuation\">(</span>module<span class=\"token punctuation\">,</span> module<span class=\"token punctuation\">.</span>exports<span class=\"token punctuation\">,</span> __webpack_require__<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n        <span class=\"token comment\">// 返回结果</span>\n        <span class=\"token keyword\">return</span> module<span class=\"token punctuation\">.</span>exports<span class=\"token punctuation\">;</span>\n    <span class=\"token punctuation\">}</span>\n\n    <span class=\"token comment\">// define __esModule on exports</span>\n    __webpack_require__<span class=\"token punctuation\">.</span><span class=\"token function-variable function\">r</span> <span class=\"token operator\">=</span> <span class=\"token punctuation\">(</span><span class=\"token parameter\">exports</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n        Object<span class=\"token punctuation\">.</span><span class=\"token function\">defineProperty</span><span class=\"token punctuation\">(</span>exports<span class=\"token punctuation\">,</span> <span class=\"token string\">'__esModule'</span><span class=\"token punctuation\">,</span> <span class=\"token punctuation\">{</span> <span class=\"token literal-property property\">value</span><span class=\"token operator\">:</span> <span class=\"token boolean\">true</span> <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token punctuation\">}</span><span class=\"token punctuation\">;</span>\n\n    <span class=\"token comment\">// 为 exports 导出的成员定义 getter 函数</span>\n    __webpack_require__<span class=\"token punctuation\">.</span><span class=\"token function-variable function\">d</span> <span class=\"token operator\">=</span> <span class=\"token punctuation\">(</span><span class=\"token parameter\">exports<span class=\"token punctuation\">,</span> definition</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n        <span class=\"token keyword\">for</span> <span class=\"token punctuation\">(</span><span class=\"token keyword\">let</span> key <span class=\"token keyword\">in</span> definition<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n            <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span>\n                <span class=\"token class-name\">Object</span><span class=\"token punctuation\">.</span>prototype<span class=\"token punctuation\">.</span><span class=\"token function\">hasOwnProperty</span><span class=\"token punctuation\">.</span><span class=\"token function\">call</span><span class=\"token punctuation\">(</span>definition<span class=\"token punctuation\">,</span> key<span class=\"token punctuation\">)</span> <span class=\"token operator\">&amp;&amp;</span>\n                <span class=\"token operator\">!</span><span class=\"token class-name\">Object</span><span class=\"token punctuation\">.</span>prototype<span class=\"token punctuation\">.</span><span class=\"token function\">hasOwnProperty</span><span class=\"token punctuation\">.</span><span class=\"token function\">call</span><span class=\"token punctuation\">(</span>exports<span class=\"token punctuation\">,</span> key<span class=\"token punctuation\">)</span>\n            <span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n                Object<span class=\"token punctuation\">.</span><span class=\"token function\">defineProperty</span><span class=\"token punctuation\">(</span>exports<span class=\"token punctuation\">,</span> key<span class=\"token punctuation\">,</span> <span class=\"token punctuation\">{</span>\n                    <span class=\"token literal-property property\">enumerable</span><span class=\"token operator\">:</span> <span class=\"token boolean\">true</span><span class=\"token punctuation\">,</span>\n                    <span class=\"token comment\">// 1. 只定义get，说明无法再模块外部对其进行修改</span>\n                    <span class=\"token comment\">// 2. definition[key] 是一个函数，也就是通过闭包的方式，巧妙地访问到了模块内部的变量</span>\n                    <span class=\"token literal-property property\">get</span><span class=\"token operator\">:</span> definition<span class=\"token punctuation\">[</span>key<span class=\"token punctuation\">]</span>\n                <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n            <span class=\"token punctuation\">}</span>\n        <span class=\"token punctuation\">}</span>\n    <span class=\"token punctuation\">}</span>\n\n    <span class=\"token comment\">// 获取 默认导出（default）兼容不和谐的模块（比如 import 了一个 commonjs 模块）</span>\n    __webpack_require__<span class=\"token punctuation\">.</span><span class=\"token function-variable function\">n</span> <span class=\"token operator\">=</span> <span class=\"token punctuation\">(</span><span class=\"token parameter\">exports</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n        <span class=\"token keyword\">const</span> getter <span class=\"token operator\">=</span> exports <span class=\"token operator\">&amp;&amp;</span> exports<span class=\"token punctuation\">.</span>__esModule <span class=\"token operator\">?</span> \n            <span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> exports<span class=\"token punctuation\">[</span><span class=\"token string\">'default'</span><span class=\"token punctuation\">]</span> <span class=\"token operator\">:</span>\n            <span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> exports<span class=\"token punctuation\">;</span>\n\n        __webpack_require__<span class=\"token punctuation\">.</span><span class=\"token function\">d</span><span class=\"token punctuation\">(</span>getter<span class=\"token punctuation\">,</span> <span class=\"token punctuation\">{</span> <span class=\"token literal-property property\">a</span><span class=\"token operator\">:</span> getter <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n        <span class=\"token keyword\">return</span> getter<span class=\"token punctuation\">;</span>\n    <span class=\"token punctuation\">}</span><span class=\"token punctuation\">;</span>\n\n    <span class=\"token keyword\">const</span> __webpack_exports__ <span class=\"token operator\">=</span> <span class=\"token punctuation\">{</span><span class=\"token punctuation\">}</span><span class=\"token punctuation\">;</span>\n\n\n    <span class=\"token comment\">// 执行入口模块</span>\n    <span class=\"token punctuation\">(</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n        <span class=\"token comment\">/**\n         * 源码\n         *  // import 一个 es 模块\n         * \n            import esValDefault from './es';\n            import { esVal } from './es';\n\n            setTimeout(() => {\n                console.log('es default val: ', esValDefault);\n                console.log('es val: ', esVal);\n            }, 3000)\n         */</span>\n\n        __webpack_require__<span class=\"token punctuation\">.</span><span class=\"token function\">r</span><span class=\"token punctuation\">(</span>__webpack_exports__<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n        \n        <span class=\"token keyword\">var</span> _es__WEBPACK_IMPORTED_MODULE_0__ <span class=\"token operator\">=</span> <span class=\"token function\">__webpack_require__</span><span class=\"token punctuation\">(</span><span class=\"token string\">'./src/es.js'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n        <span class=\"token function\">setTimeout</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n            console<span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span><span class=\"token string\">'es default val: '</span><span class=\"token punctuation\">,</span> _es__WEBPACK_IMPORTED_MODULE_0__<span class=\"token punctuation\">.</span>exports<span class=\"token punctuation\">[</span><span class=\"token string\">'default'</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n            console<span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span><span class=\"token string\">'es val: '</span><span class=\"token punctuation\">,</span> _es__WEBPACK_IMPORTED_MODULE_0__<span class=\"token punctuation\">.</span>exports<span class=\"token punctuation\">.</span>esVal<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n        <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span> <span class=\"token number\">3000</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n\n        <span class=\"token comment\">/**\n         * \n         * 源码：\n         * \n         * // import 一个 commonjs 模块\n\n            import cjs from './cjs';\n            import { val } from './cjs';\n\n            console.log(cjs);\n\n            setTimeout(() => {\n                console.log(cjs.val);\n                console.log(val);\n            }, 3000)\n         */</span>\n        __webpack_require__<span class=\"token punctuation\">.</span><span class=\"token function\">r</span><span class=\"token punctuation\">(</span>__webpack_exports__<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n        <span class=\"token keyword\">var</span> _cjs__WEBPACK_IMPORTED_MODULE_0__ <span class=\"token operator\">=</span> <span class=\"token function\">__webpack_require__</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"./src/cjs.js\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n        <span class=\"token keyword\">var</span> _cjs__WEBPACK_IMPORTED_MODULE_0___default <span class=\"token operator\">=</span> __webpack_require__<span class=\"token punctuation\">.</span><span class=\"token function\">n</span><span class=\"token punctuation\">(</span>_cjs__WEBPACK_IMPORTED_MODULE_0__<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n        console<span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">(</span><span class=\"token function\">_cjs__WEBPACK_IMPORTED_MODULE_0___default</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n        <span class=\"token function\">setTimeout</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">function</span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n            console<span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">(</span><span class=\"token function\">_cjs__WEBPACK_IMPORTED_MODULE_0___default</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span>val<span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n            console<span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span>_cjs__WEBPACK_IMPORTED_MODULE_0__<span class=\"token punctuation\">.</span>val<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n        <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span> <span class=\"token number\">3000</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n\n        <span class=\"token comment\">/**\n         * 源码\n         * \n         * // require 一个 cjs 模块\n         * \n         * \n            const cjs = require('./cjs');\n            const { val } = require('./cjs');\n\n            console.log(cjs);\n\n            setTimeout(() => {\n                console.log(cjs.val);\n                console.log(val);\n            }, 3000)\n\n         */</span>\n        <span class=\"token keyword\">var</span> cjs <span class=\"token operator\">=</span> <span class=\"token function\">__webpack_require__</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"./src/cjs.js\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n        <span class=\"token keyword\">var</span> _require <span class=\"token operator\">=</span> <span class=\"token function\">__webpack_require__</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"./src/cjs.js\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span>\n            val <span class=\"token operator\">=</span> _require<span class=\"token punctuation\">.</span>val<span class=\"token punctuation\">;</span>\n        \n        console<span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span>cjs<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n        <span class=\"token function\">setTimeout</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">function</span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n            console<span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span>cjs<span class=\"token punctuation\">.</span>val<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n            console<span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span>val<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n        <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span> <span class=\"token number\">3000</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n\n        <span class=\"token comment\">/**\n         * 源码\n         * \n         * // require 一个 es 模块\n         * \n         * \n            const es = require('./es');\n            const { esVal } = require('./es');\n\n            setTimeout(() => {\n                console.log(es.esVal);\n                console.log(esVal);\n            }, 3000)\n         */</span>\n        <span class=\"token keyword\">var</span> es <span class=\"token operator\">=</span> <span class=\"token function\">__webpack_require__</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"./src/es.js\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n        <span class=\"token keyword\">var</span> _require <span class=\"token operator\">=</span> <span class=\"token function\">__webpack_require__</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"./src/es.js\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span>\n        <span class=\"token comment\">// 如果使用 require + 对象解构的方式，相当于 esVal 已经被赋值给 esVal 这个变量了，后续再取 esVal 就是一个固定值了</span>\n        <span class=\"token comment\">// 而 es.esVal（或者说_require.esVal 同一个东西） 他们其实是一个 getter 函数，执行了一个闭包，可以访问到模块内部的 esVal 变量，所以调用的时候能实时拿到最新值</span>\n            esVal <span class=\"token operator\">=</span> _require<span class=\"token punctuation\">.</span>esVal<span class=\"token punctuation\">;</span>\n        \n        <span class=\"token function\">setTimeout</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">function</span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n            console<span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span>es<span class=\"token punctuation\">.</span>esVal<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n            console<span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span>esVal<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n        <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span> <span class=\"token number\">3000</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span>\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span></code></pre></div>","frontmatter":{"title":"Webpack 打包产物分析","date":"June 06, 2022","description":"CommonJs, ESModule, import/export, require, module.exports"}}},"pageContext":{"id":"866798b9-be06-5fc5-88a5-01594cfc3cfb","previousPostId":"6f38702c-1e71-5aa3-a09c-21a4483fdcb3","nextPostId":null}},"staticQueryHashes":["2755755109","2841359383"]}